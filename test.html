<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>nijitama角色收集</title>
		<style>
			#character-overview {
				display: flex;
				flex-wrap: wrap;
				/* 使子项换行 */
				gap: 10px;
				/* 角色之间的间隙 */
				justify-content: center;
				/* 水平居中对齐 */
			}

			#character-overview div {
				width: 128px;
				height: 128px;
				display: flex;
				justify-content: center;
				align-items: center;
				overflow: hidden;
				/* 裁剪掉溢出的部分 */
			}

			#character-overview img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				/* 保证图片填满容器并裁剪掉溢出部分 */
				border-radius: 8px;
				/* 给图片添加圆角 */
				transition: transform 0.3s ease;
				/* 为图片的放大效果添加过渡 */
			}

			#character-overview div:hover {
				transform: scale(1.05);
				/* 鼠标悬停时轻微放大 div */
			}

			#character-overview img:hover {
				transform: scale(1.05);
				/* 鼠标悬停时轻微放大图片 */
			}

			#character-avatar {
				display: flex;
				justify-content: center;
				align-items: center;
				margin-top: 20px;
			}

			#character-avatar img {
				width: 128px;
				height: 128px;
				object-fit: cover;
				border-radius: 8px;
				cursor: pointer;
				/* 鼠标悬停时变为可点击 */
			}

			#character-skill {
				display: flex;
				justify-content: center;
				margin-top: 10px;
			}

			#character-skill img {
				display: block;
				margin: 0 auto;
				max-width: 100%;
				/* 确保图片不会超出容器宽度 */
				max-height: 100%;
				/* 确保图片不会超出容器高度 */
			}

			#character-def-face {
				height: 128px;
				width: 1280px;
				margin-top: 20px;
				display: flex;
				justify-self: center;
				overflow-x: auto;
				overflow-y: hidden;
			}
			
			/*隐藏表情图界面的滚动条*/
			#character-def-face::-webkit-scrollbar {
				display: none;
			}

			#character-def-face img {
				height: 128px;
				object-fit: cover;
				border-radius: 8px;
				margin-right: 20px;
			}
		</style>
	</head>
	<script>
		const names = ["a000", "a001", "a002", "a003", "a004", "a005", "a006", "a007", "a008", "a009", "a010", "a011",
			"a012", "a015", "a016", "a018", "awt", "bic", "bin", "biz", "bun", "ckg", "ecg", "ecz", "har", "hit", "hiz",
			"hyu", "iga", "ina", "iwm", "iyo", "izu", "kag", "kai", "kaw", "kaz", "kii", "mik", "mus", "nag", "not",
			"oki", "osu", "oum", "owa", "sag", "san", "sim", "sin", "smu", "sur", "taj", "tnb", "tos", "wak", "ymt",
			"yzm"
		];

		//角色概览
		const Character_overview = names.map(name => `overview/f_${name}.png`);
		//角色技能图
		const Character_skill = names.map(name => `skill/c_${name}.png`);
		//角色表情图
		const Character_def_face = names.flatMap(name => {
			return Array.from({
					length: 21
				}, (_, number) =>
				`face/s_${name}_def_face_${String(number).padStart(2, '0')}.png`
			);
		});
		//角色身体图-站姿
		const Character_def_body = names.map(name => `def_body/s_${name}_def_body.png`);
		//角色身体图-战斗
		const Character_b_def_body = names.map(name => `def_body/b_${name}_def_body.png`);
		//角色身体图-战损
		const Character_b_def_dbody = names.map(name => `def_dbody/b_${name}_aw_dbody.png`);
		//角色浴室图
		const Character_barh = names.map(name => `def_dbody/s_${name}_bath_body.png`);
		//角色赞助图
		const Character_patronag = names.map(name => `def_dbody/s_${name}_pa_body.png`);
		//角色泳装
		const Character_swim = names.map(name => `def_dbody/s_${name}_swim_body.png`);
		//角色圣诞节
		const Character_christmas = names.map(name => `def_dbody/s_${name}_xmas_body.png`);

		// 加载角色概览图
		function LoadOverview() {
			// 获取展示角色概览图的父容器
			const overviewContainer = document.getElementById('character-overview');

			// 遍历 names 数组中的每个角色
			names.forEach((name, index) => {
				// 创建新的 div 元素，id 为角色的名字
				const characterDiv = document.createElement('div');
				characterDiv.id = name;

				// 创建 img 元素，src 为对应角色的概览图路径
				const characterImage = document.createElement('img');
				characterImage.src = Character_overview[index];

				// 设置图片加载失败时的处理
				characterImage.onerror = () => {
					characterDiv.style.display = 'none'; // 隐藏包含图片的 div
				};

				// 为图片添加点击事件，触发 select 方法
				characterImage.onclick = () => select(name);

				// 将图片添加到 div 中
				characterDiv.appendChild(characterImage);

				// 将创建的 div 添加到容器中
				overviewContainer.appendChild(characterDiv);
			});
		}

		// 当点击图片时，将该图插入到 #character-avatar 中，并插入对应的技能图到 #character-skill
		// 当点击图片时，将该图插入到 #character-avatar 中，并插入对应的技能图到 #character-skill
		function select(name) {
			const avatarContainer = document.getElementById('character-avatar');
			const skillContainer = document.getElementById('character-skill');
			const defFaceContainer = document.getElementById('character-def-face');

			// 清空 avatar 和 skill 和 def-face 容器
			avatarContainer.innerHTML = '';
			skillContainer.innerHTML = '';
			defFaceContainer.innerHTML = '';

			// 获取对应的图片路径
			const characterImageSrc = Character_overview[names.indexOf(name)];
			const skillImageSrc = Character_skill[names.indexOf(name)];

			// 创建新的 img 元素，设置 src 为点击图片的路径
			const avatarImage = document.createElement('img');
			avatarImage.src = characterImageSrc;

			const skillImage = document.createElement('img');
			skillImage.src = skillImageSrc;

			// 将图片插入到对应容器
			avatarContainer.appendChild(avatarImage);
			skillContainer.appendChild(skillImage);

			// 如果技能图加载失败，使用默认的替代图
			skillImage.onerror = function() {
				skillImage.src = 'skill/error_skill.png';
			};

			// 获取并插入对应的表情图
			for (let number = 0; number < 21; number++) {
				const faceDiv = document.createElement('div'); // 创建容器 div
				const faceImage = document.createElement('img');
				faceImage.src = Character_def_face[names.indexOf(name) * 21 + number];

				// 如果表情图加载失败，隐藏对应的 div
				faceImage.onerror = function() {
					faceDiv.style.display = 'none'; // 隐藏包含表情图的 div
				};

				// 将 faceImage 添加到 faceDiv 中，然后再添加到 defFaceContainer
				faceDiv.appendChild(faceImage);
				defFaceContainer.appendChild(faceDiv);
			}

			// 隐藏角色概览容器
			document.getElementById('character-overview').style.display = 'none';

			// 为 avatarImage 添加点击事件，点击时恢复页面初始状态
			avatarImage.onclick = function() {
				restorePage();
			};
		}


		// 恢复页面初始状态
		function restorePage() {
			// 清空 avatar 和 skill 容器
			document.getElementById('character-avatar').innerHTML = '';
			document.getElementById('character-skill').innerHTML = '';
			document.getElementById('character-def-face').innerHTML = '';

			// 显示角色概览容器
			document.getElementById('character-overview').style.display = 'flex';
		}

		// 页面加载完成后调用 LoadOverview 方法
		//window.onload = LoadOverview;
	
		// 确保在页面加载完成后执行代码
		window.onload = function() {
			//加载全部角色头像概览图
			LoadOverview();
			
			//让表情图区域鼠标滚轮能控制左右滑动
			// 获取 character-def-face 容器元素
			const defFaceContainer = document.getElementById('character-def-face');

			// 如果 defFaceContainer 存在，绑定事件
			if (defFaceContainer) {
				// 当鼠标进入 character-def-face 容器时
				defFaceContainer.addEventListener('mouseenter', function() {
					// 改变滚动行为，监听水平滚动
					defFaceContainer.addEventListener('wheel', handleHorizontalScroll);
				});

				// 当鼠标离开 character-def-face 容器时
				defFaceContainer.addEventListener('mouseleave', function() {
					// 恢复垂直滚动行为
					defFaceContainer.removeEventListener('wheel', handleHorizontalScroll);
				});
			} else {
				console.error('#character-def-face 元素未找到');
			}

			// 滚轮事件的处理函数，控制左右滚动
			function handleHorizontalScroll(event) {
				// 阻止默认的垂直滚动行为
				event.preventDefault();

				// 根据滚轮的方向设置水平滚动
				defFaceContainer.scrollLeft += event.deltaY; // 使用 deltaY 来控制 scrollLeft
			}
		};
	</script>



	<body>
		<div id="character-overview"></div>
		<div id="character-skill"></div>
		<div id="character-avatar"></div>
		<div id="character-def-face" class="def-face-container"></div>
		<div id="character-default-body">2</div>
		<div id="character-default-body-fight">3</div>
		<div id="character-default-body-fight-injured">4</div>
		<div id="character-bath">5</div>
		<div id="character-patronag">6</div>
		<div id="character-swim">7</div>
		<div id="character-christmas">8</div>
	</body>
</html>
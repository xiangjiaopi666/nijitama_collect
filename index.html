<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Image Gallery</title>
		<style>
			body {
				margin: 0;
				font-family: Arial, sans-serif;
			}

			#face {
				display: flex;
				flex-wrap: wrap;
				padding: 10px;
			}

			.image-container {
				width: 128px;
				height: 128px;
				margin: 5px;
				border-radius: 16px;
				overflow: hidden;
				transition: transform 0.2s ease, box-shadow 0.2s ease;
			}

			.image-container img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				cursor: pointer;
			}

			.image-container img:hover {
				transform: scale(1.1);
				box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
			}

			#photo {
				display: none;
				padding: 20px;
			}

			#photo div {
				margin-bottom: 20px;
			}

			/* 头像和技能图样式 */
			.first-row {
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.skill-image-container {
				text-align: center;
			}

			.avatar-container {
				margin-top: 10px;
				text-align: left;
			}

			/* 桌面版样式 */
			.skill-image-container img {
				width: auto;
				height: auto;
				max-width: none;
				max-height: none;
				object-fit: contain;
			}

			.avatar-container img {
				max-width: 128px;
				max-height: 128px;
				object-fit: contain;
			}

			/* 手机版样式 */
			@media (max-width: 768px) {

				/* 使技能图宽度为手机宽度，保持宽高比 */
				.skill-image-container img {
					width: 100%;
					height: auto;
				}

				/* 头像容器仍然保持128px */
				.avatar-container img {
					max-width: 128px;
					max-height: 128px;
					object-fit: contain;
				}

				/* photo 内容内的黑色区域保持500px大小 */
				.black-box {
					width: 100%;
					height: 500px;
				}

				/* 居中缩略图容器 */
				#face {
					justify-content: center;
					flex-wrap: wrap;
				}

				/* 每行至少显示3个缩略图，并保持宽高比 */
				.image-container {
					width: calc(33.33% - 10px);
					margin: 5px;
					aspect-ratio: 1;
					display: flex;
					justify-content: center;
					align-items: center;
				}

				/* 确保图片充满容器并保持比例 */
				.image-container img {
					width: 100%;
					height: 100%;
					object-fit: cover;
				}

				/* 默认表情图样式 */
				.def-face-container {
					display: flex;
					flex-wrap: wrap;
					justify-content: space-between;
					gap: 1px;
					/* 增加图片间的间隔 */
				}

				/* 每个表情图至少占屏幕的三分之一 */
				.def-face-container img {
					width: calc(33.33% - 20px);
					/* 每个表情图占屏幕宽度的三分之一 */
					object-fit: contain;
					/* 保持原图比例 */
				}

				/* 默认身体图样式 */
				.def-body-container img {
					width: calc(100%);
					/* 每个表情图占屏幕宽度的三分之一 */
					object-fit: contain;
					/* 保持原图比例 */
				}
			}
		</style>
	</head>
	<body>
		<div id="face"></div>
		<div id="photo"></div>

		<script>
			const names = ["a000", "a001", "a002", "a003", "a004", "a005", "a006", "a007", "a008", "a009", "a010", "a011",
				"a012", "a015", "a016", "a018", "awt", "bic", "bin", "biz", "bun", "ckg", "ecg", "ecz", "har", "hit", "hiz",
				"hyu", "iga", "ina", "iwm", "iyo", "izu", "kag", "kai", "kaw", "kaz", "kii", "mik", "mus", "nag", "not",
				"oki", "osu", "oum", "owa", "sag", "san", "sim", "sin", "smu", "sur", "taj", "tnb", "tos", "wak", "ymt",
				"yzm"
			];
			//角色缩略图
			const Character_thumbnail = names.map(name => `overview/f_${name}.png`);
			//角色技能图
			const Character_skill = names.map(name => `skill/c_${name}.png`);
			// 角色表情图
			const Character_def_face = names.flatMap(name => {
				// 生成从 00 到 20 的编号
				return Array.from({
						length: 21
					}, (_, number) =>
					`face/s_${name}_def_face_${String(number).padStart(2, '0')}.png`
				);
			});
			//角色身体图-站姿
			const Character_def_body = names.map(name => `body/s_${name}_def_body.png`);
			//角色身体图-战斗
			const Character_b_def_body = names.map(name => `body/b_${name}_def_body.png`);
			//角色身体图-战损
			const Character_def_dbody = names.map(name => `body/s_${name}_def_dbody.png`);
			// 通过JavaScript动态加载图片
			function loadImages() {
				const faceDiv = document.getElementById('face');
				Character_thumbnail.forEach((image, index) => {
					const container = document.createElement('div');
					container.classList.add('image-container');
					container.id = names[index]; // 设置 div 的 id 为对应的 names 值

					const imgElement = document.createElement('img');
					imgElement.src = image;

					// 图片加载失败时，隐藏该区域
					imgElement.onerror = function() {
						container.style.display = 'none'; // 隐藏图片容器
					};

					// 点击图片时的处理
					imgElement.onclick = function() {
						showPhoto(container); // 传递包含id的container
					};

					container.appendChild(imgElement);
					faceDiv.appendChild(container);

					// 在头像下面添加默认表情图片
					addDefaultFaces(container);
				});
			}

			// 添加角色默认表情图片
			function addDefaultFaces(container) {
				const name = container.id; // 获取当前头像的名称
				const faceContainer = document.createElement('div'); // 创建一个新容器来包裹表情图片

				// 获取当前角色的所有默认表情图片
				const faces = Character_def_face.filter(path => path.includes(name));

				// 为每个默认表情图片创建 img 元素并添加到容器中
				faces.forEach(face => {
					const imgElement = document.createElement('img');
					imgElement.src = face;

					// 保持原图大小
					imgElement.style.objectFit = 'contain'; // 保证图片按比例显示
					imgElement.style.margin = '5px'; // 图片之间的间距

					// 图片加载失败时的处理，隐藏该图片
					imgElement.onerror = function() {
						imgElement.style.display = 'none'; // 隐藏加载失败的图片
					};

					faceContainer.appendChild(imgElement);
				});

				// 将表情图片容器添加到头像容器下面
				container.appendChild(faceContainer);
			}


			function showPhoto(container) {
				// 隐藏 #face 窗口
				document.getElementById('face').style.display = 'none';

				// 获取 photo 容器
				const facePhoto = document.getElementById('photo');
				facePhoto.style.display = 'block';

				// 创建第一行 div：头像和技能图分开，不在同一行
				const firstRowDiv = document.createElement('div');
				firstRowDiv.classList.add('first-row'); // 使用新的 class 来定义垂直排列

				// 技能图容器
				const skillImageContainer = document.createElement('div');
				skillImageContainer.classList.add('skill-image-container');
				const image_Character_skill = document.createElement('img');
				const skillImageSrc = Character_skill[names.indexOf(container.id)];
				image_Character_skill.src = skillImageSrc; // 使用对应的技能图片

				// 设置技能图片原始尺寸
				image_Character_skill.style.maxWidth = 'none'; // 不限制技能图片的宽度
				image_Character_skill.style.maxHeight = 'none'; // 不限制技能图片的高度
				image_Character_skill.style.objectFit = 'contain'; // 保持原始比例

				// 图片加载失败时的处理
				image_Character_skill.onerror = function() {
					// 加载 error_skill.png 图片代替
					image_Character_skill.src = 'skill/error_skill.png';
				};

				// 正常情况下显示技能图片
				skillImageContainer.appendChild(image_Character_skill);

				// 头像容器
				const avatarContainer = document.createElement('div');
				avatarContainer.classList.add('avatar-container');
				const image_Character_avatar = document.createElement('img');
				image_Character_avatar.src = container.querySelector('img').src; // 使用点击的头像图片

				// 设置头像图片（保持原始大小）
				image_Character_avatar.style.maxWidth = '128px'; // 保持最大宽度
				image_Character_avatar.style.maxHeight = '128px'; // 保持最大高度
				image_Character_avatar.style.objectFit = 'contain'; // 保持原始比例

				// 将头像图片添加到容器
				avatarContainer.appendChild(image_Character_avatar);
				// 将技能图容器和头像容器分别添加到 firstRowDiv 中
				firstRowDiv.appendChild(skillImageContainer); // 技能图容器
				firstRowDiv.appendChild(avatarContainer); // 头像容器
				// 将第一行 div 加入到 photo 中
				facePhoto.appendChild(firstRowDiv); // 第一行技能图和头像
				//第二类图：表情图
				// 在技能图下面添加默认表情容器
				const defFaceContainer = document.createElement('div');
				defFaceContainer.classList.add('def-face-container'); // 为容器添加类名
				// 获取当前角色的所有默认表情图片路径
				const faces = Character_def_face.filter(path => path.includes(container.id));
				// 为每个表情图片创建 img 元素并添加到容器中
				faces.forEach(face => {
					const imgElement = document.createElement('img');
					imgElement.src = face;
					// 保持原图大小
					imgElement.style.objectFit = 'contain'; // 保证图片按比例显示
					imgElement.style.margin = '5px'; // 图片之间的间距
					// 图片加载失败时的处理，隐藏该图片
					imgElement.onerror = function() {
						imgElement.style.display = 'none'; // 隐藏加载失败的图片
					};
					defFaceContainer.appendChild(imgElement);
				});
				facePhoto.appendChild(defFaceContainer);
				//添加:角色身体图-站姿
				const defBodyContainer = document.createElement('div');
				defBodyContainer.classList.add('def-body-container');
				// 获取当前角色的所有身体图片路径
				const bodys = Character_def_body.filter(path => path.includes(container.id));
				bodys.forEach(body => {
					const imgElement = document.createElement('img');
					imgElement.src = body;

					// 保持原图大小
					imgElement.style.objectFit = 'contain'; // 保证图片按比例显示
					imgElement.style.margin = '5px'; // 图片之间的间距

					// 图片加载失败时的处理，隐藏该图片
					imgElement.onerror = function() {
						imgElement.style.display = 'none'; // 隐藏加载失败的图片
					};

					defBodyContainer.appendChild(imgElement);
				});
				// 将默认表情容器添加到 photo 中
				facePhoto.appendChild(defBodyContainer);
				// 点击左上角头像恢复初始状态
				avatarContainer.onclick = function() {
					resetToDefault();
				};
			}
			// 恢复初始状态
			function resetToDefault() {
				// 隐藏 photo
				document.getElementById('photo').style.display = 'none';

				// 显示 face
				document.getElementById('face').style.display = 'flex';

				// 清空 photo 内容
				document.getElementById('photo').innerHTML = '';
			}
			// 页面加载时调用loadImages函数
			window.onload = loadImages;
		</script>
	</body>
</html>
